<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>ðŸ’– Pedido de Namoro</title>

<style>
html, body {
  margin: 0; width: 100%; height: 100%; overflow: hidden;
  font-family: Arial, cursive;
}
body {
  background: linear-gradient(270deg, #ff4d6d, #ff85a2, #7209b7);
  background-size: 600% 600%;
  animation: fundo 8s ease infinite;
}
@keyframes fundo {
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}

#mensagem {
  position:absolute; inset:0;
  display:flex; align-items:center; justify-content:center;
  color:#fff; font-size:26px; text-align:center;
  text-shadow:0 0 25px #fff;
  opacity:0; transition:opacity .6s;
  padding: 20px;
}
canvas{position:absolute; inset:0}

/* coraÃ§Ãµes vermelhos */
.heart{position:absolute; color:rgba(255,0,0,.8); animation:subir 5s linear infinite}
@keyframes subir{
  from{transform:translateY(100vh) scale(.6); opacity:0}
  to{transform:translateY(-10vh) scale(1.2); opacity:1}
}

/* confete */
.confete{position:absolute; width:8px; height:8px; animation:cair 2.2s linear forwards}
@keyframes cair{
  from{transform:translateY(0) rotate(0)}
  to{transform:translateY(100vh) rotate(720deg)}
}
</style>
</head>

<body>

<div id="mensagem">
Pequena ðŸ’Œ,<br><br>

Eu fiz essa carta sÃ³ pra te pedir uma coisa muito importante:<br>
<span style="font-size:28px; font-weight:bold;">Quer namorar comigo? ðŸ¥°</span><br><br>

Prometo nunca desistir de vocÃª,<br>
estar do seu lado nos dias bons e tambÃ©m nos dias difÃ­ceis.<br><br>

Quero que saiba que vocÃª pode contar comigo<br>
pra tudo, sempre. ðŸ’•<br><br>

Eu sinto saudades de cada mensagem sua,<br>
de cada risada, de cada momento juntos.<br><br>

EntÃ£oâ€¦ Quer ser minha namorada? ðŸ’–ðŸ’–
</div>

<canvas id="raspa"></canvas>

<script>
const canvas = document.getElementById("raspa");
const ctx = canvas.getContext("2d");
const msg = document.getElementById("mensagem");

function resize(){
  canvas.width = innerWidth;
  canvas.height = innerHeight;
  ctx.globalCompositeOperation = "source-over"; // garante que preenchemos sobre o que tinha antes
  ctx.fillStyle = "#eee";
  ctx.fillRect(0,0,canvas.width,canvas.height);
}
resize();
addEventListener("resize", resize);

let ativo=false, liberado=false;

function apagar(x,y){
  ctx.globalCompositeOperation="destination-out";
  ctx.beginPath();
  ctx.arc(x,y,60,0,Math.PI*2);
  ctx.fill();
  ctx.lineJoin = "round"; // bordas arredondadas
  ctx.lineCap = "round";
  verificar();
}

canvas.addEventListener("touchstart",()=>ativo=true);
canvas.addEventListener("touchend",()=>ativo=false);
canvas.addEventListener("touchmove",e=>{
  if(!ativo || liberado) return;
  const t=e.touches[0]; apagar(t.clientX,t.clientY);
});

function verificar(){
  const img = ctx.getImageData(0,0,canvas.width,canvas.height).data;
  let transparente=0, total=0;
  for(let i=3;i<img.length;i+=40){
    total++; if(img[i]===0) transparente++;
  }
  if(transparente/total > 0.20 && !liberado){
    liberar();
  }
}

function liberar(){
  liberado=true;
  msg.style.opacity=1;
  canvas.style.display="none";
  confete();
}

function confete(){
  for(let i=0;i<120;i++){
    const c=document.createElement("div");
    c.className="confete";
    c.style.left=Math.random()*100+"vw";
    c.style.top="-10px";
    c.style.background=`hsl(${Math.random()*360},100%,50%)`;
    document.body.appendChild(c);
    setTimeout(()=>c.remove(),3000);
  }
}

// coraÃ§Ãµes subindo
setInterval(()=>{
  const h=document.createElement("div");
  h.className="heart"; h.innerHTML="â¤";
  h.style.left=Math.random()*100+"vw";
  h.style.fontSize=(16+Math.random()*26)+"px";
  document.body.appendChild(h);
  setTimeout(()=>h.remove(),5000);
},350);
</script>

</body>
</html>
